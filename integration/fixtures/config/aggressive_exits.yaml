# integration/fixtures/config/aggressive_exits.yaml
# Aggressive exits configuration for smoke tests.
# Tests Base -> Aggressive transition and Partial Exit logic.

aggressive:
  enabled: true
  triggers:
    U_aggr: {base: "U", dt_max: 15, min_chg: 0.03, partial: 0.4, trail: 0.12}
    S_aggr: {base: "S", dt_max: 30, min_chg: 0.06, partial: 0.5, trail: 0.12}
    M_aggr: {base: "M", dt_max: 60, min_chg: 0.10, partial: 0.4, trail: 0.15}
    L_aggr: {base: "L", dt_max: 90, min_chg: 0.15, partial: 0.35, trail: 0.20}

  defaults:
    partial_take_profit_pct_of_pos: 40
    runner_tp_pct: 25.0
    runner_sl_pct: -7.0

  safety_filters:
    min_wallet_tier: "tier1"
    min_wallet_winrate_30d: 0.60
    min_wallet_roi_30d_pct: 20.0
    min_liquidity_usd: 20000
    max_spread_bps: 180
    require_honeypot_pass: true
    require_risk_regime_not_risk_off: true
    require_not_in_cooldown: true

  chain_reaction:
    enabled: true
    leader_min_indegree: 3
    exit_hazard_threshold: 0.70
    reaction_window_sec: 30
    action: "tighten_sl_or_exit"

# Base exits configuration
exits:
  hard_sl_pct: -0.20
  hard_tp_pct: 0.50
  partial_tp: []
  trailing:
    activation_pct: 0.15
    delta_pct: 0.05
  max_hold_sec: 300
  chain_reaction:
    enabled: true
    threshold: 0.5
    action: "immediate_exit"
